---
---
{% include menu.html title="Search" %}
<hr align=left width=1100>

<script>
  const searchBox = document.getElementById('searchBox');
  const resultsContainer = document.getElementById('results');
  
  let searchIndex;

  // Path to the search index (JSON)
  const searchIndexPath = '/search/search.json';
  console.log('Attempting to load search index from:', searchIndexPath);

  // Fetch the search index (JSON)
  fetch(searchIndexPath)
    .then(response => {
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      console.log('Successfully loaded search index from:', searchIndexPath);
      return response.json();
    })
    .then(data => {
      searchIndex = data;
      console.log('Search index data:', searchIndex); // Log the search index data
    })
    .catch(error => {
      console.error('There was a problem loading the search index:', error);
      resultsContainer.innerHTML = '<li>Error loading search index</li>';
    });

  // Search function
  searchBox.addEventListener('input', function() {
    if (!searchIndex) {
      resultsContainer.innerHTML = '<li>Search index is not loaded yet</li>';
      return;
    }

    const query = this.value.toLowerCase();
    console.log('Search query:', query);  // Log the search query

    const filteredResults = searchIndex.filter(item => 
      item.title.toLowerCase().includes(query) ||
      item.content.toLowerCase().includes(query)
    );

    console.log('Filtered results:', filteredResults);  // Log the filtered results

    if (filteredResults.length > 0) {
      resultsContainer.innerHTML = filteredResults.map(result => 
        `<li><a href="${result.url}">${result.title}</a></li>`
      ).join('');
    } else {
      resultsContainer.innerHTML = '<li>No results found</li>';
    }
  });
</script>


</body>
</html>
