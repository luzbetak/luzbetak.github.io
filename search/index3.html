---
---
{% include menu.html title="Search" %}
<hr align=left width=1100>

<div>
  <input type="text" id="searchInput" placeholder="Search...">
  <button onclick="performSearch()">Search</button>
</div>
<div id="searchResults"></div>

<script>
  let searchData = [];

  // Fetch search data from the search.json file
  fetch('/search/search.json')
    .then(response => response.json())
    .then(data => {
      searchData = data;
    })
    .catch(error => {
      console.error('Error fetching search data:', error);
    });

  function performSearch() {
    const query = document.getElementById('searchInput').value.toLowerCase();
    const resultsDiv = document.getElementById('searchResults');
    resultsDiv.innerHTML = '';

    if (!query) {
      resultsDiv.innerHTML = '<p>Please enter a search term.</p>';
      return;
    }

    // Filter search results based on the query
    const results = searchData.filter(item => 
      item.title.toLowerCase().includes(query) || 
      item.content.toLowerCase().includes(query)
    );

    if (results.length > 0) {
      results.forEach(result => {
        // Correctly prepend the /search/ path to the URLs
        const resultItem = document.createElement('div');
        const correctUrl = `/search/${result.url}`; // Add /search/ prefix
        resultItem.innerHTML = `<h3><a href="${correctUrl}">${result.title}</a></h3><p>${result.content}</p>`;
        resultsDiv.appendChild(resultItem);
      });
    } else {
      resultsDiv.innerHTML = '<p>No results found.</p>';
    }
  }
</script>


{% include footer.html %}
</body>
</html>
