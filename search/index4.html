<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Search</title>
    <link rel="stylesheet" type="text/css" href="/static/style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/static/linux2.png" type="image/png" sizes="32x32">

    <div class="navbar">
    <a href="http://luzbetak.github.io/">Kevin Luzbetak</a>
    <a href="http://luzbetak.github.io/search">Search</a>
    </div>

    <style>
      #search {
        width: 800px; /* Increased width */
        height: 30px; /* Increased height */
        font-size: 20px; /* Larger font size */
        padding: 10px;
      }
      #results { font-size: 18px; margin-top: 20px; }
      #results li { margin-bottom: 10px; }
      #results a { text-decoration: none; color: #007bff; 
      }
    </style>
  </head>


  <body>

    <p><hr align=left width=1100>

    <div>
      <input type="text" id="search" placeholder="Search ..">
      <ul id="results"></ul>
    </div>

    <!-- Lunr.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js"></script>

    <!-- Search Functionality -->
    <script>
      // Load the search index JSON
      fetch('/search/search-index.json')
        .then(response => response.json())
        .then(data => {
          // Initialize Lunr.js with the JSON data
          const idx = lunr(function () {
            this.ref('id');
            this.field('title');
            this.field('content');

            data.forEach(function (doc) {
              this.add(doc);
            }, this);
          });

          // Event listener for search input
          document.getElementById('search').addEventListener('input', function () {
            const query = this.value;
            const results = idx.search(query);
            const resultsContainer = document.getElementById('results');

            resultsContainer.innerHTML = '';

            if (results.length) {
              results.forEach(result => {
                const item = data.find(d => d.id == result.ref);
                resultsContainer.innerHTML += `<li><a href="${item.url}">${item.title}</a></li>`;
              });
            } else {
              resultsContainer.innerHTML = '<li>No results found</li>';
            }
          });
        });
    </script>
  </body>
</html>

