---
---
{% include menu.html title="Search" %}

    <div>
      <input type="text" id="search" placeholder="Search...">
      <ul id="results"></ul>
    </div>

    <!-- Lunr.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js"></script>

    <!-- Search Functionality -->
    <script>
      // Load the search index JSON
      fetch('/search/search-index.json')
        .then(response => response.json())
        .then(data => {
          // Initialize Lunr.js with the JSON data
          const idx = lunr(function () {
            this.ref('id');
            this.field('title');
            this.field('content');

            data.forEach(function (doc) {
              this.add(doc);
            }, this);
          });

          // Event listener for search input
          document.getElementById('search').addEventListener('input', function () {
            const query = this.value;
            const results = idx.search(query);
            const resultsContainer = document.getElementById('results');

            resultsContainer.innerHTML = '';

            if (results.length) {
              results.forEach(result => {
                const item = data.find(d => d.id == result.ref);
                resultsContainer.innerHTML += `<li><a href="${item.url}">${item.title}</a></li>`;
              });
            } else {
              resultsContainer.innerHTML = '<li>No results found</li>';
            }
          });
        });
    </script>

  </body>
</html>

